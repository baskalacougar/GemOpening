<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gem Opening</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="sidebar">
    <nav>
      <a href="index.html" class="active">ðŸ’Ž Gem Opening</a>
      <a href="casino.html">ðŸŽ° Casino Simulator</a>
      <a href="future.html">ðŸ”® Future Feature</a>
    </nav>
  </div>

  <h1>ðŸ’Ž Opening Gems with <a href="https://guildstats.eu/character?nick=baska%20la%20cougar" target="_blank" class="baska-link">Baska La Cougar</a> ðŸ’Ž</h1>

  <div class="main-container">
    <div class="left-panel">
      <div>
        <br><label for="profesja">Select vocation:</label><br>
        <select id="profesja" onchange="updateDesiredMods()">
          <option>Knight</option>
          <option>Sorcerer</option>
          <option>Druid</option>
          <option>Paladin</option>
          <option>Monk</option>
        </select><br>

        <label>Select gem size / price / Tibia Coins value on your server:</label><br>
        <div style="display: flex; align-items: center; gap: 10px; justify-content: center; flex-wrap: wrap;">
          <select id="wielkosc" onchange="toggleDesiredModSelect()">
            <option value="lesser">Lesser (125k)</option>
            <option value="regular">Regular (1kk)</option>
            <option value="greater">Greater (6kk)</option>
          </select>
          <input type="number" id="gemBuyPrice" value="" step="10000" placeholder="Gem cost (GP)" title="Cena zakupu jednego gema (w GP)" style="width: 140px;" oninput="updateLoss()">
          <input type="number" id="tcPrice" value="" step="1000" placeholder="1 TC = ? GP" title="TC price in GP" style="width: 140px;" oninput="updateLoss()">
          <small style="color: #999;">(If you leave empty => gem price will not be included)</small>
          <small style="color: #999;">(If you leave empty => 1TC == 40 000 GP)</small>
        </div>

        <div id="desiredModWrapper">
          <label for="desiredMod">Desired 3rd mod:</label><br>
          <select id="desiredMod" onchange="clearAfterDesiredChange()">
            <option value="">(None)</option>
          </select>
        </div>

        <button onclick="openGem()">Open Gem ðŸ’¥</button>
      </div>

      <div class="output" id="lossDisplay">
        <p>
          <span class="label">Your loss:</span>
          <span id="lossValue">0 zÅ‚</span>
          <select id="currency" onchange="updateLoss()" style="margin-left: 15px; font-size: 14px; padding: 5px 10px; border-radius: 8px;">
            <option value="pln">PLN</option>
            <option value="eur">EUR</option>
            <option value="tc">Tibia Coin</option>
          </select>
        </p>
      </div>
      <div class="output" id="wynik">
        <p class="centered-text">Try your luck!</p>
      </div>      
    </div>

    <div class="right-panel">
      <div class="output" id="historyBox">
        <p><span class='label'>Opening history (Mod 3):</span></p>
        <ul id="modHistory" style="list-style: none; padding: 0;"></ul>
      </div>
    </div>
  </div>

  <div id="modal" style="display:none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center;">
    <div style="background: #1c0e03; border: 2px solid gold; padding: 30px; border-radius: 20px; text-align: center; color: #ffe599; box-shadow: 0 0 30px gold;">
      <h2 style="margin-bottom: 20px;">ðŸŽ¯ You've hit your desired gem!</h2>
      <p>Do you want to continue opening?</p>
      <div style="margin-top: 20px;">
        <button onclick="closeModal(true)" style="margin: 10px;">Yes, keep going</button>
        <button onclick="closeModal(false)" style="margin: 10px;">No, stop</button>
      </div>
    </div>
  </div>

  <div id="candies"></div>
  <script src="gem.js"></script>
</body>
</html>
